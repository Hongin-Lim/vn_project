<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>BenePick</title>
  <link href="manifest.json" rel="manifest">
  <meta content="#000000" name="theme-color">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
  // web/index.html 파일에 다음 메타 태그를 추가해보세요
  <meta content="*" name="Access-Control-Allow-Origin" />
  <!-- Content Security Policy 수정 - Facebook 도메인 추가 -->
  <meta content="default-src 'self' 'unsafe-inline' 'unsafe-eval' *.googleapis.com *.gstatic.com *.facebook.com *.facebook.net *.fbcdn.net;"
        http-equiv="Content-Security-Policy">

  <!-- Google Sign-in -->
  <meta content="YOUR_GOOGLE_SIGN_IN_OAUTH_CLIENT_ID.apps.googleusercontent.com"
        name="google-signin-client_id">

  <script defer src="flutter.js"></script>

  <!-- Facebook SDK 로드 -->
  <script async crossorigin="anonymous"
          src="https://connect.facebook.net/ko_KR/sdk.js">
  </script>
</head>
<body>
<!-- Facebook SDK 초기화 -->
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '437874102595744',
      cookie     : true,
      xfbml      : true,
      version    : 'v18.0'
    });

    FB.AppEvents.logPageView();
    console.log("Facebook SDK initialized");
  };
</script>

<!-- Firebase 초기화 -->
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
  import { getStorage } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";
  import { getAuth } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyACa_AQoox_tUS8MXfaHFIBk4ukgNF2zoQ",
    authDomain: "benepick-7d89f.firebaseapp.com",
    projectId: "benepick-7d89f",
    storageBucket: "benepick-7d89f.firebasestorage.app",
    messagingSenderId: "165719448160",
    appId: "1:165719448160:web:cc3ea908b2bfbd135cc105",
    measurementId: "G-6XZM315ML3"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const storage = getStorage(app);
  const auth = getAuth(app);

  // 전역 객체에 storage 할당
  window.flutterStorage = storage;

  console.log("Firebase Initialized:", app);
  console.log("Storage Initialized:", storage);
  console.log("Storage attached to window:", window.flutterStorage);
</script>

<!-- Service Worker 등록 -->
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/flutter_service_worker.js')
      .then(function (registration) {
        console.log('Service Worker 등록 성공:', registration.scope);
      })
      .catch(function (error) {
        console.error('Service Worker 등록 실패:', error);
      });
  }
</script>

<!-- Flutter 앱 스크립트 -->
<script src="main.dart.js"></script>

</body>
</html>